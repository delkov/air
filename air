sergsero@aileron:/opt$ cat /etc/supervisor/conf.d/untt.conf
[program:untt]
directory=/opt/modesmixer
command=/opt/modesmixer/modesmixer2 --inConnectId 192.168.64.170:37070:UNTT --db /home/sergsero/data/basestation.sqb --frdb /home/sergsero/data/flightroute.sqb --pictures /home/sergsero/data/pictures --silhouettes /home/sergsero/data/silhouettes --web 8088 --location 55.xx:83.yy --metric --add-reference-point 56.39252:85.22168:THR21 --add-points 56.37377:85.19940:THR03 56.34278:85.16250:LOM03 56.36525:85.18903:LLM03 56.40111:85.23194:LMM21 56.42472:85.25972:LOM21 56.23667:83.98861:NN 56.69139:85.32917:SP 57.00722:82.05972:BA --valid-adsb 2:4 --valid-modes 0:5
user=nobody
umask=022
autostart=True
autorestart=True
redirect_stderr=True


--filter-expire пока остался - это длина цикла, но посмотрим...

так --filter-expires разве длина цикла ??
Я считал что --filter-count -кол-во сообщений --filter-expire за какое время должны поступить чтобы пройти валидацию --filter-time -время в течении которого не требуется перевалидация.
Я не прав был?


По другому, --filter-expire - это время нахождения записи в кэше. Если не поступает сообщений более n секунд, фильтр помечает борт, как недостоверный. Если же борт помечается как достоверный,
и плотность сообщений от него по времени выше или равна установленной (--valid-modes n:m, --valid--adsb n:m), то он продолжает считаться доверенным и пропускается через фильтр.
Другое дело, если от него не поступало новых сообщений более N секунд (--filter-expire N) считая от крайнего пришедшего по времени, то запись удаляется и начинается новый цикл валидации.

а я наобарот считал -то есть перепутал time и expire -понятно почему у меня небыло левых хексов у меня expire 6 time 300 count 3 cтояло -мда ерунда какая то была но работало таки  То есть у меня валидным считался борт если поступило 3 сообщения за 300 секунд и перевалидация была если небыло сообщений в течении 6 сек -так выходит.



Исходные данные IAS, TAS, Mach передаются в Mode S Enhanced Surveillance (EHS) и нам нужны несущие их сообщения DF 20 и DF 21. Но фильтрация (всех) Mode S с требованием 0 CRC вырезает такие сообщения. Чтобы они появились вновь нужно в --valid-modes указать первый аргумент ненулевой. То есть, сажем, --valid-modes 2:4. И сообщения появятся.

Действительно, такая проблема есть - фотографии с внешнего ресурса (http://www.airport-data.com/aircraft/) отображаются не всегда. Посмотрю, похоже дело в таймауте запроса - если сайт airport-data.com быстро не выдает ответ (url с картинкой) на запрос миксера, то последний тут же вставляет "силуэт-заглушку".
Запрос же формируется всегда, когда фото не найдено у себя в локальной коллекции - вот пример ответа сию:


supervisor:
http://forum.adsbradar.ru/f25/modesmixer2-windows-linux-com-tcp-mixer-transcoder-modes-1451/index110.html


DB:
https://junzis.com/adb/'



dump1090  1830     1 31 08:06 ?        00:35:16 /usr/bin/dump1090-mutability --net --ppm 0 --oversample --fix --phase-enhance --max-range 300 --net-http-port 0 --net-ri-port 30001 --net-ro-port 30002 --net-bi-port 30004 --net-bo-port 30005 --net-sbs-port 30003 --net-fatsv-port 10001 --net-heartbeat 60 --net-ro-size 500 --net-ro-interval 1 --net-buffer 2 --net-bind-address 127.0.0.1 --stats-every 3600 --write-json /rundump1090-mutability --write-json-every 1 --json-location-accuracy 1 --quiet
pi        2488  2214  0 09:59 pts/0    00:00:00 grep --color=auto dump


--net-sbs-port 30003 --net-heartbeat 60 --net-ro-size 500 --net-ro-interval 1 --net-buffer 2 --net-bind-address 127.0.0.1 


'
*8d7801ca6033946d32733d065898;
*02a18639aecf80;
*8d7801ca9944ef04a8608317c09b;
*5d7801ca126126;
*8d7801ca9944ef04c8788348f0e0;
*8d7801ca9944ef04a87c83bf429b;
*02a186325157fe;
*5d75025fac7acc;
*8d75025f582d30dc07256a0d1e0e;
*5d71c078fcb96a;
*a80001b0200414b1cf2820159b5f;
*02e18d91493bfc;
*5f71bf89a94b96;
*02a185324aff3d;
*5f71bf89a94b96;
*02a185344adb10;
*02a185344adb10;
*8f71bf89582b646f9274afa9aa24;
*5d71c244e1cb58;
*5d71bd77e75ab9;
*8d71bf459910a99ec80405b1961b;
*02a1843044ee6a;
*8d71bf4520098e38c398203180db;
*02a1843044ee6a;
*02a1843044ee6a;
*a000043010010080e50000c0a72e;
*8d71bf459910aa9ee80405f1f560;
*02a1843044ee6a;
*8d71bf459910aa9ee80405f1f560;
*8d71ba00ea1f58a62b5c083d6b29;
*5d71c276e0f62b;
*5d71c276e0f629;
*02a186b05f8e99;
*02a186b05f8e99;
*8d71c27658370472a473292b1fe6;
*02a186b05f8e99;
*8d71c276202c1337d31820d55d09;
*80a186b058370472a87340b0b854;
*8d71c27658370472aa73456b4ee2;
'

alex_hash
И все же для экономии объема записываемых потоков в будущем может прикрутить фишку что бы лишнее отбрасывалось, если глянуть на строку пакета то как уже выше писалось msg8 не дает ничего в практическом плане, а например msg3 наполовину забит ненужными битами, только место занимают.
Тоже относится и к другим типам пакетов msg.

MSG,1,0,0,424929,0,2016/07/19,21:12:40.452,2016/07/19,21:12:40.452,SVR2842(callsign),,,,,,,,,,,0
MSG,3,0,0,4242CF,0,2016/04/09,17:11:11.170,2016/04/09,17:11:11.170,,37975(altitude),,,51.848486(long),113.549042(lot),,,,,,0
MSG,4,0,0,4242CF,0,2016/04/09,17:11:11.748,2016/04/09,17:11:11.748,,,400.2(ground speed),319.9(track),,,-1536(vertical rate),,,,,0
MSG,5,0,0,42428B,0,2016/07/19,12:14:15.495,2016/07/19,12:14:15.495,,36000(altitude by zapros radar),,,,,,,,,0,0
MSG,6,0,0,42428B,0,2016/07/19,12:14:15.495,2016/07/19,12:14:15.495,,,,,,,,0014(squawk),,0,0,0
MSG,7,0,0,4240CF,0,2016/07/19,12:14:19.553,2016/07/19,12:14:19.553,,2700(altitude),,,,,,,,,,0
MSG2 -- on ground
MSG,8,0,0,42428B,0,2016/07/19,12:14:19.637,2016/07/19,12:14:19.637,,,,,,,,,,,,0 (ON THE GROUND)



Позывной содержится ТОЛЬКО в MSG,1 - оставлять нужно, чтобы не держать базу соответствий "HEX-позывной"
MSG,3 - содержит больше всего информации - высоту и координаты - оставляем обязательно
MSG,4 - содержит скорость, направление по азимуту и изменение высоты - оставляем для визуализации борта на карте
MSG,7 - содержит только высоту - на эшелоне меняется редко, а в случае ЧП... лучше оставить
MSG,5 - ответ за запрос радара - содержит высоту
MSG,6 - ответ на запрос радара - содержит сквок
MSG,2 - при касании шосси ВПП, есть в логе только от бортов, находящихся на земле перед взлетом или после посадки до отключения транспондера



HAVE TO LOOK AT 2 (ONLY WHEN on the ground) & 8 MSG anf end field --> 


